<!-- bill-summary.component.html -->
<div class="container mt-4">
  <h2 class="text-center mb-4">Review and Confirm Bills</h2>

  <!-- Error Handling Message -->
  <div *ngIf="error" class="alert alert-danger">
    <strong>Error:</strong> Failed to load bills. Please try again or go back.
    <button class="btn btn-link" (click)="goBack()">Go Back</button>
    <button class="btn btn-primary" (click)="retry()">Retry</button>
  </div>

  <!-- Bill Summary Table -->
  <div *ngIf="!error">
    <div class="card">
      <div class="card-body">
        <table class="table table-striped table-hover">
          <thead class="thead-dark">
            <tr>
              <th>Select</th>
              <th>Consumer Number</th>
              <th>Bill Date</th>
              <th>Billing Period</th>
              <th>Bill Amount</th>
              <th>Due Date</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let bill of selectedBills">
              <td>
                <input type="checkbox" [(ngModel)]="bill.selected" (change)="updateTotal()" />
              </td>
              <td>{{ bill.consumerId }}</td>
              <td>{{ bill.billDate }}</td>
              <td>{{ bill.billPeriod }}</td>
              <td>{{ bill.dueAmount | currency }}</td>
              <td>{{ bill.dueDate }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Total Amount Section -->
    <div class="d-flex justify-content-between mt-4">
      <h4>Total Payable Amount: <strong>{{ totalAmount | currency }}</strong></h4>
    </div>

    <!-- Payment Method Selection -->
    <div class="mt-4">
      <label for="paymentMethod" class="form-label">Select Payment Method</label>
      <select id="paymentMethod" [(ngModel)]="selectedPaymentMethod" class="form-select" required>
        <option value="creditCard">Credit Card</option>
        <option value="debitCard">Debit Card</option>
        <option value="netBanking">Net Banking</option>
      </select>
    </div>

    <!-- Proceed Button -->
    <div class="mt-4 d-flex justify-content-between">
      <button class="btn btn-warning" (click)="goBack()">Back</button>
      <button class="btn btn-success" [disabled]="totalAmount === 0 || !selectedPaymentMethod" (click)="proceedToPayment()">Proceed to Payment</button>
    </div>
  </div>
</div>
